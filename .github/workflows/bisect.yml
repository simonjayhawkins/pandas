name: Bisect Regressions

on:
  workflow_dispatch:
    inputs:
      good:
        description: 'good commit'
        default: 'v1.0.5'
        required: true
      bad:
        description: 'bad commit'
        default: 'HEAD'
        required: true
      issue:
        description: 'GH issue'
        default: "35819"
        required: true

jobs:
  bisect:
    runs-on: ubuntu-latest
    env:
      GH_ISSUE: ${{ github.event.inputs.issue }}
    steps:
    # - name: Update for build environment
    #   run: |
    #     sudo apt-get update
    #     sudo apt-get install -y build-essential
    #     sudo apt-get clean
    # - name: Setting conda path
    #   run: echo ::add-path::$CONDA/bin
    # - name: Update conda
    #   run: |
    #     conda config --set quiet true --set always_yes true
    #     conda update -n base -c defaults conda
    #     conda list
    - name: Checkout pandas
      uses: actions/checkout@v2
    - name: Fetch git tags
      run: |
        git remote -v
        git fetch --all --tags
    - name: test
      run: |
        git checkout v1.0.5
        git status
    # - name: copy code sample and runner script
    #   run: |
    #       cp bisect/$GH_ISSUE.py ..
    #       cp bisect/runner.sh ..
    #       ls -latr ..
    # - name: Update conda environment
    #   run: |
    #     conda env create -n pandas-dev --file=environment.yml
    #     source activate pandas-dev
    #     conda list
    # - name: build pandas
    #   run: |
    #     source activate pandas-dev
    #     python setup.py build_ext -i -j 2
    #     python -c "import pandas as pd;print(pd.__version__)"
    # - name: bisect
    #   run: |
    #     source activate pandas-dev
    #     git checkout master
    #     git status
    #     git bisect start ${{ github.event.inputs.bad }} ${{ github.event.inputs.good }}
    # - name: bisect
    #   run: |
    #     source activate pandas-dev
    #     git bisect log
    # - name: bisect
    #   run: |
    #     source activate pandas-dev
    #     git bisect run ../runner.sh $GH_ISSUE
    # - name: bisect
    #   run: |
    #     source activate pandas-dev
    #     git bisect log
